<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>看板系统</title>
  <link rel="stylesheet" type="text/css" href="../../static/libs/iview/css/iview.css">
  <link rel="stylesheet" type="text/css" href="../../static/libs/iview/css/ionicons.css">
</head>

<body>
  <div id="kb">

  </div>
</body>
<script src="../../static/libs/vue/chart/vue.js"></script>
<script src="../../static/libs/iview/js/iview.min.js"></script>
<script src="../.././static/libs/jquery/jquery-3.2.1.min.js?ver=1.1"></script>
<script src="../.././static/js/url.js"></script>
<script src="../.././static/libs/echarts/echarts.js"></script>
<script type="text/javascript">
  /**
   *Created by Nickluas on 2018/8/17
   */
  $(function() {
    // 模塊初始化；
    APP.kb.init();
  });

  (function(L) {
    var _this = null;
    L.kb = L.kb || {};
    _this = L.kb = {

      Main: {
        data() {
          return {}
        },
        watch: {},
        methods: {

        },
        created() {

          Array.prototype.remove  =   function(s)  {         
            for  (var  i  =  0;  i  <  this.length;  i++)  {             
              if  (s  ==  this[i])this.splice(i,  1);         
            }     
          }     
          function  Map()  {         
            /** 存放键的数组(遍历用到) 
             */
            this.keys  =  new  Array();         
            /** 存放数据 */
                    
            this.data  =  new  Object();                  
            /**        
             * 放入一个键值对       
             * @param {String} key        
             * @param {Object} value        
             */
                    
            this.put  =   function(key,  value)  {             
              if (this.data[key]  ==  null) {                 
                this.keys.push(key);             
              }             
              this.data[key]  =  value;         
            };                  
            /**        
             * 获取某键对应的值        
             * @param {String} key        
             * @return {Object} value        
             */
                    
            this.get  =   function(key)  {             
              return  this.data[key];         
            };                  
            /**        
             * 删除一个键值对        
             * @param {String} key        
             */
                    
            this.remove  = function(key)  {  
              console.log(1);           
              this.keys.remove(key);     
              this.data[key]  =  null;         
            };                  
            /**        
             * 遍历Map,执行处理函数        
             *         
             * @param {Function} 回调函数 function(key,value,index){..}        
             */
                    
            this.each  =   function(fn) {             
              if (typeof  fn  !=  'function') {                 
                return;             
              }             
              var  len  =  this.keys.length;             
              for (var  i = 0; i < len; i++) {                 
                var  k  =  this.keys[i];                 
                fn(k, this.data[k], i);             
              }         
            };                   /**        * 获取键值数组(类似Java的entrySet())        * @return 键值对象{key,value}的数组        */         
            this.entrys  =   function()  {             
              var  len  =  this.keys.length;             
              var  entrys  =  new  Array(len);             
              for  (var  i  =  0;  i  <  len;  i++)  {                 
                entrys[i]  =   {                     
                  key :  this.keys[i],
                  value :  this.data[i]                 
                };             
              }             
              return  entrys;         
            };                   /**        * 判断Map是否为空        */         
            this.isEmpty  =   function()  {             
              return  this.keys.length  ==  0;         
            };                   /**        * 获取键值对数量        */         
            this.size  =   function() {             
              return  this.keys.length;         
            };                   /**        * 重写toString         */         
            this.toString  =   function() {             
              var  s  =  "{";             
              for (var  i = 0; i < this.keys.length; i++, s += ',') {                 
                var  k  =  this.keys[i];                 
                s  +=  k + "=" + this.data[k];             
              }             
              s += "}";             
              return  s;         
            };     
          }     

          var  m  =  new  Map();         
          m.put('key1', 'Comtop');         
          m.put('key2', '南方电网');         
          m.put('key3', '景新花园');         
          console.log("init:" + m);                  
          m.put('key1', '康拓普');         
          console.log("set key1:" + m);                  
          m.remove("key2");         
          console.log("remove key2: " + m);                  
          var  s  = "";         
          m.each(function(key, value, index) {             
            s  +=  index + ":" +  key + "=" + value + "/n";         
          });         
          console.log(s);     
          // new Promise(test).then(function (result) {
          //     console.log('成功：' + result);
          // }).catch(function (reason) {
          //     console.log('失败：' + reason);
          // });
          //
          // function test(resolve, reject) {
          //   var timeOut = Math.random() * 2;
          //   console.log('set timeout to: ' + timeOut + ' seconds.');
          //   setTimeout(function() {
          //     if (timeOut < 1) {
          //       console.log('call resolve()...');
          //       resolve('200 OK');
          //     } else {
          //       console.log('call reject()...');
          //       reject('timeout in ' + timeOut + ' seconds.');
          //     }
          //   }, timeOut * 1000);
          // }
        }

      },




      init: function() {
        let Component = Vue.extend(_this.Main);
        new Component().$mount('#kb');

      }
    }
  }(APP))
</script>

</html>
